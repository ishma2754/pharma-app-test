<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style/index.css">

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js"></script>
  <title>Document</title>

  

</head>
<body>
  <div class="navbar">
    <h2>PharmaKeeper</h2>
    <img width="80px" src="logomy.png">
  </div>

  <div class="summary-section">
    <button class="js-speech-button speech-button"><i class="fa-solid fa-2x fa-microphone"></i></button>
    <p class="total-medicines">Total Medicines: <span class="js-total-medicines"></span></p>
    <br>
    <p class="earliest-expiry"><span class="js-earliest-expiry"></span></p>
  </div>


  <div class="whole-page-grid">

    
    <div class="filter-container">
      <div class="filter-section">
        <input type="text" id="filterNameInput" class="js-filter-name-input filter-name-input" placeholder="Filter brand name">
        <input type="date" id="filterDateInput" class="js-filter-date-input filter-date-input" placeholder="Filter Due date" data-placeholder="Filter Due date">
        <button class="filter-button js-filter-button">Filter</button>
      </div>
     
    
      <div  class="js-filter-medicines filter-medicines-show">

      </div>
    
    </div>
   



    <div class="medicines-display">

      <div class="medicines-input-grid">

        <input placeholder="Brand Name" id="nameInput" class="js-name-input name-input">
    
        
    
        <input type="date" id="dateInput" class="js-due-date-input due-date-input" placeholder="Expiry Date" data-placeholder="Expiry Date">

       <input type="text" placeholder="Description" id="descriptionInput" class="js-description-input description-input">

        <input type="file" class="js-medicines-image-input image-input" id="imageInput"   accept="image/png,image/jpeg">

        

        <input type="number" class="js-quantity-input quantity-input" id="quantityInput" placeholder="Quantity">

   

      

       
       <button class="add-medicines-button js-add-medicines-button">
        Add
      </button>
      
      </div>

      <div class="medicines-grid-display-container">
        <div class="js-medicines-grid-display medicines-grid-display"></div>
      </div>
     

    </div>






    

  </div>



  <button id="enable-notifications" onclick="requestNotificationPermission()">Enable Notifications</button>

</body>
 
  <script>
    var firebaseConfig = {
    apiKey: "AIzaSyDFVzQHeFVdJnhsjikQAdaVCYNabnR7bBM",
    authDomain: "pharmakeeperapp.firebaseapp.com",
    projectId: "pharmakeeperapp",
    storageBucket: "pharmakeeperapp.appspot.com",
    messagingSenderId: "192602918045",
    appId: "1:192602918045:web:f0aa281d8d2bb5efced874"
};


    firebase.initializeApp(firebaseConfig);


    const messaging = firebase.messaging();

// Request permission to receive notifications


function requestNotificationPermission() {
      messaging.requestPermission()
        .then(function() {
          console.log('Notification permission granted.');
          return messaging.getToken();
        })
        .then(function(token) {
          console.log('FCM Token:', token);
        })
        .catch(function(err) {
          console.log('Unable to get permission to notify.', err);
        });
    }

/*
messaging.requestPermission()
.then(function() {
  console.log('Notification permission granted.');
  
  // Get the registration token
  return messaging.getToken();
})
.then(function(token) {
  console.log('FCM Token:', token);
  // Use the token to send notifications or save it to your server/database
})
.catch(function(err) {
  console.log('Unable to get permission to notify.', err);
});
*/

messaging.onMessage(function(payload) {
    console.log('Message received. ', payload);
    // Customize notification here
    var notificationTitle = payload.notification.title;
    var notificationOptions = {
      body: payload.notification.body
       // Add your custom icon here
    };

    new Notification(notificationTitle, notificationOptions);
  });


  </script>
  <script type="module" src="src/ui.js"></script>
</html>



